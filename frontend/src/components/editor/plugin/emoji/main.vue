<script setup lang="ts">
import { useI18n } from 'vue-i18n';
const { t } = useI18n();
import { $dom } from '../../Util';
const dialogRef: any = inject('dialogRef');

let emoji1 = 'ðŸ˜Š,ðŸ˜„,ðŸ˜…,ðŸ˜†,ðŸ˜,ðŸ˜¢,ðŸ˜­,ðŸ˜”,ðŸ˜ž,ðŸ˜£,ðŸ˜ ,ðŸ¤¬,ðŸ˜¡,ðŸ‘¿,ðŸ˜²,ðŸ˜±,ðŸ˜¯,ðŸ˜®,ðŸ˜,ðŸ¤”,ðŸ™„,ðŸ˜•';
let emoji2 = 'ðŸ™,ðŸ™Ž,ðŸ™‹,ðŸ§,ðŸ¤¦,ðŸ¤·,ðŸ•µ,ðŸ¤´,ðŸ§•,ðŸ¤µ,ðŸ‘°,ðŸ¤°,ðŸ¤±,ðŸ¤¶,ðŸ¦¸,ðŸ¦¹,ðŸ§™,ðŸ§š,ðŸ§›,ðŸ§œ,ðŸ§,ðŸ§ž,ðŸ§Ÿ,ðŸ§,ðŸ§Ž,ðŸ•º,ðŸ•´,ðŸ§–,ðŸ§—,ðŸ¤º,ðŸ‡,â›·,ðŸ‚,ðŸŒ,ðŸš£,â›¹,ðŸ‹,ðŸš´,ðŸšµ,ðŸ¤¸,ðŸ¤¼,ðŸ¤½,ðŸ¤¾,ðŸ¤¹,ðŸ§˜,ðŸ›Œ,ðŸ‘­,ðŸ‘¬,ðŸ‘ª,ðŸ—£,ðŸ‘¤,ðŸ‘¥';
let emoji3 = 'ðŸ¾,ðŸ¦Š,ðŸ¯,ðŸ¦§,ðŸ™,ðŸ¦,ðŸ™‰,ðŸ»,ðŸ¶,ðŸ·,ðŸ¹,ðŸ§¸,ðŸ¦Œ,ðŸŽ ,ðŸŒ,ðŸ¦‚,ðŸŽ,ðŸ ,ðŸŸ,ðŸ³,ðŸ¬,ðŸŽ­,ðŸ°,ðŸ­,ðŸ¼,ðŸ¨,ðŸž,ðŸ‰,ðŸ¦œ,ðŸ¦‘,ðŸ®,ðŸ“,ðŸ¦€,ðŸ¦Ž,ðŸ¦´,ðŸ¿';
let emoji4 = 'ðŸŒµ,ðŸŒ³,ðŸŒ´,ðŸŽ‹,ðŸŽ,ðŸ€,â˜˜,ðŸŒ¿,ðŸŒ±,ðŸƒ,ðŸŒ¾,ðŸŽ„,ðŸŒ¹,ðŸ¥€,ðŸ‚,ðŸ,ðŸŒ¼,ðŸµ,ðŸŒ»,ðŸŒ·,ðŸŒ¸,ðŸŒº,ðŸ’,ðŸ’®,ðŸµ,ðŸ„,â,â€,ðŸ”';
let emoji5 = 'ðŸ’—,ðŸ–¤,â¤,ðŸ§¡,ðŸ’›,ðŸ’š,ðŸ’™,ðŸ’œ,ðŸ’Ÿ,ðŸ¤,ðŸ¤Ž,ðŸ’”,â£,ðŸ’ž,ðŸ’“,ðŸ’–,ðŸ’˜,ðŸŽ„,â­,ðŸŒŸ,ðŸ’«,âœ¨,ðŸ’Œ,ðŸŽ€,ðŸŽ‰,ðŸ’Ž,ðŸ’,â¤â€ðŸ”¥,ðŸ‘‘,ðŸ§§,ðŸŽ,ðŸŽˆ,â™¥,ðŸ”–';
let emoji6 = 'ðŸŒž,ðŸŒ,ðŸ”†,ðŸ”…,â­,ðŸŒ™,ðŸŒ˜,ðŸŒ•,ðŸŒ¤,â›…,ðŸŒ¥,â˜,ðŸŒ§,ðŸŒ©,âš¡,â›„,â˜ƒ,â„,â˜€,â˜”,ðŸŒ‚,ðŸŒˆ,ðŸ’§,ðŸ’¦,ðŸŒ¡,â„,ðŸŒŠ,ðŸŒ€,ðŸŒª,ðŸ’¨,â˜„,ðŸŒ,ðŸŒ¤,ðŸŒ¤,ðŸŒ©,ðŸŒ§,â˜„,ðŸŒª,ðŸŽ—,ðŸ§Š,ðŸ–,ðŸ„â€â™‚,ðŸŒ¬';
let emoji7 = 'ðŸ’¯,ðŸ’¡,ðŸ”,ðŸ“…,ðŸ“š,ðŸ“–,ðŸ“˜,ðŸ“—,ðŸ“™,ðŸ“’,ðŸ“”,ðŸ““,ðŸ’»,ðŸ–¥,ðŸ“²,ðŸ“±,âŒš,â²,ðŸ§·,ðŸ“,ðŸ–‹,ðŸ–Œ,ðŸ–,âœ,ðŸ“¨,ðŸ“,ðŸ“œ,ðŸ“‘,âœ‰,ðŸ–Œ,ðŸ”—,ðŸŽ“,ðŸ“ˆ,â°,âš—,ðŸ“Ÿ,ðŸ“ ,ðŸ“£,ðŸ›,ðŸŽŠ,ðŸ”“,âš ,â¸,ðŸŽ¯,âœï¸Ž';

let emojiList = [
    { title: t('quill.emoji1'), content: emoji1.split(','), value: '1' },
    { title: t('quill.emoji2'), content: emoji2.split(','), value: '2' },
    { title: t('quill.emoji3'), content: emoji3.split(','), value: '3' },
    { title: t('quill.emoji4'), content: emoji4.split(','), value: '4' },
    { title: t('quill.emoji5'), content: emoji5.split(','), value: '5' },
    { title: t('quill.emoji6'), content: emoji6.split(','), value: '6' },
    { title: t('quill.emoji7'), content: emoji7.split(','), value: '7' }
];

const tabs = ref(emojiList);

const closeDialog = () => {
    dialogRef.value.close();
};
const submitDialog = () => {
    let result_data = selectedemoji.value.join('');
    dialogRef.value.close(result_data);
};

const selectedemoji = ref<string[]>([]);
const selectemoji = (emoji: string, id: string) => {
    let index = selectedemoji.value.indexOf(emoji);
    let ele = $dom('#' + id);
    if (index == -1) {
        selectedemoji.value.push(emoji);
        ele?.classList.add('selected');
    } else {
        selectedemoji.value.splice(index, 1);
        ele?.classList.remove('selected');
    }
};

const selectemoji2 = (emoji: string) => {
    selectedemoji.value = [];
    selectedemoji.value.push(emoji);
    submitDialog();
};

onMounted(() => {});

onBeforeUnmount(() => {});
</script>

<template>
    <div class="mb-4 select-none">
        <Tabs value="1" scrollable>
            <TabList>
                <Tab v-for="tab in tabs" :key="tab.value" :value="tab.value">
                    {{ tab.title }}
                </Tab>
            </TabList>
            <div class="h-[40vh] overflow-y-auto">
                <TabPanels>
                    <TabPanel v-for="tab in tabs" :key="tab.value" :value="tab.value">
                        <div class="grid grid-cols-40 gap-4">
                            <div v-for="(item, index2) of tab.content" :key="index2" class="col-span-32 sm:col-span-6 lg:col-span-4">
                                <div
                                    @click="selectemoji(item, `emoji-${tab.value}-${index2}`)"
                                    @dblclick="selectemoji2(item)"
                                    :id="`emoji-${tab.value}-${index2}`"
                                    class="emoji text-3xl rounded-lg border border-1 border-gray-500 text-center h-[50px] flex items-center justify-center"
                                >
                                    {{ item }}
                                </div>
                            </div>
                        </div>
                    </TabPanel>
                </TabPanels>
            </div>
        </Tabs>
        <Divider style="margin: 0px" />
        <div class="flex gap-4 justify-center m-2 mt-5">
            <Button label="å–æ¶ˆ" severity="secondary" @click="closeDialog"></Button>
            <Button label="ç¡®å®š" @click="submitDialog"></Button>
        </div>
    </div>
</template>

<style scoped>
:global(.p-dialog-header) {
    padding-top: 1rem !important;
    padding-bottom: 0.5rem !important;
}

.emoji {
    cursor: pointer;
    &:hover {
        background-color: var(--editor-toolbar-background);
        color: var(--primary-color);
    }
}

.selected {
    background-color: var(--surface-ground);
    color: var(--primary-color);
}
</style>
